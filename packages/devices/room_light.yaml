#
# Room Light
#

mqtt:
  light:
    - name: Room Light
      command_topic: cmnd/IR_Bridge/IRSEND
      payload_on: '{"Protocol":"NEC","Bits":32,"Data":"0x01A3748B"}'
      payload_off: '{"Protocol":"NEC","Bits":32,"Data":"0x01A310EF"}'
      optimistic: true

    - name: Room Brightness
      command_topic: cmnd/IR_Bridge/IRSEND
      payload_on: '{"Protocol":"NEC","Bits":32,"Data":"0x01A37986"}'
      payload_off: '{"Protocol":"NEC","Bits":32,"Data":"0x01A36996"}'
      optimistic: true

    - name: Room Night Light
      command_topic: cmnd/IR_Bridge/IRSEND
      payload_on: '{"Protocol":"NEC","Bits":32,"Data":"0x01A354AB"}'
      payload_off: '{"Protocol":"NEC","Bits":32,"Data":"0x01A310EF"}'
      optimistic: true

#
# Simulate 3-way toggle switch
#
automation:
  - alias: Turn other room lights off when night light is on
    trigger:
      platform: state
      entity_id: light.room_night_light
      from: "off"
      to: "on"
    action:
      - service: python_script.set_state
        data:
          entity_id: light.room_light
          state: "off"

  - alias: Turn other room lights off when light is on
    trigger:
      platform: state
      entity_id: light.room_light
      from: "off"
      to: "on"
    action:
      - service: python_script.set_state
        data:
          entity_id: light.room_night_light
          state: "off"
